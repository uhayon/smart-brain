{"version":3,"sources":["../node_modules/react-router-dom/es/Link.js","components/SignIn/SignIn.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","invariant__WEBPACK_IMPORTED_MODULE_2__","invariant__WEBPACK_IMPORTED_MODULE_2___default","history__WEBPACK_IMPORTED_MODULE_3__","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_possibleConstructorReturn","self","ReferenceError","isModifiedEvent","event","metaKey","altKey","ctrlKey","shiftKey","Link","_React$Component","_temp","_this","instance","Constructor","TypeError","_classCallCheck","this","_len","args","Array","_key","apply","concat","handleClick","props","onClick","defaultPrevented","button","preventDefault","history","context","router","_this$props","replace","to","push","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","render","_props","innerRef","obj","keys","indexOf","_objectWithoutProperties","undefined","location","href","createHref","a","createElement","ref","Component","propTypes","func","string","bool","oneOfType","object","isRequired","defaultProps","contextTypes","shape","__webpack_exports__","SignIn","_Volumes_Macintosh_HDD_Users_uhayon_Documents_Projects_smart_brain_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_Volumes_Macintosh_HDD_Users_uhayon_Documents_Projects_smart_brain_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Volumes_Macintosh_HDD_Users_uhayon_Documents_Projects_smart_brain_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","handleUsernameChange","username","setState","formErrors","_Volumes_Macintosh_HDD_Users_uhayon_Documents_Projects_smart_brain_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","state","formData","handlePasswordChange","password","onInputKeyPress","setUserLogged","onSubmitSignIn","fieldsValid","_this$state$formData","passwordValid","trim","usernameValid","loadUser","userId","token","localStorage","getItem","sessionStorage","fetch","process","headers","Authorization","then","response","ok","json","Error","user","catch","err","signInFailed","handleKeepSignedInClick","keepUserSignedIn","checked","saveAuthTokenInSession","setItem","method","Content-Type","body","JSON","stringify","data","success","_this2","id","removeItem","_this3","_this$state$formData2","_this$state$formError","usernameErrorState","passwordErrorState","react__WEBPACK_IMPORTED_MODULE_6___default","className","_Input_Input__WEBPACK_IMPORTED_MODULE_8__","label","_ref","onInputChange","inputValue","errorState","errorMessage","_ref2","type","onChange","htmlFor","style","color","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","React","forwardRef","_contexts_LoggedUserContext__WEBPACK_IMPORTED_MODULE_9__","_ref3"],"mappings":"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","file":"static/js/5.55946802.chunk.js","sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"invariant\";\nimport { createLocation } from \"history\";\n\nvar isModifiedEvent = function isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n};\n/**\n * The public API for rendering a history-aware <a>.\n */\n\n\nvar Link = function (_React$Component) {\n  _inherits(Link, _React$Component);\n\n  function Link() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Link);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.handleClick = function (event) {\n      if (_this.props.onClick) _this.props.onClick(event);\n\n      if (!event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      !_this.props.target && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n      ) {\n          event.preventDefault();\n          var history = _this.context.router.history;\n          var _this$props = _this.props,\n              replace = _this$props.replace,\n              to = _this$props.to;\n\n          if (replace) {\n            history.replace(to);\n          } else {\n            history.push(to);\n          }\n        }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Link.prototype.render = function render() {\n    var _props = this.props,\n        replace = _props.replace,\n        to = _props.to,\n        innerRef = _props.innerRef,\n        props = _objectWithoutProperties(_props, [\"replace\", \"to\", \"innerRef\"]); // eslint-disable-line no-unused-vars\n\n\n    invariant(this.context.router, \"You should not use <Link> outside a <Router>\");\n    invariant(to !== undefined, 'You must specify the \"to\" property');\n    var history = this.context.router.history;\n    var location = typeof to === \"string\" ? createLocation(to, null, null, history.location) : to;\n    var href = history.createHref(location);\n    return React.createElement(\"a\", _extends({}, props, {\n      onClick: this.handleClick,\n      href: href,\n      ref: innerRef\n    }));\n  };\n\n  return Link;\n}(React.Component);\n\nLink.propTypes = {\n  onClick: PropTypes.func,\n  target: PropTypes.string,\n  replace: PropTypes.bool,\n  to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  innerRef: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n};\nLink.defaultProps = {\n  replace: false\n};\nLink.contextTypes = {\n  router: PropTypes.shape({\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n      replace: PropTypes.func.isRequired,\n      createHref: PropTypes.func.isRequired\n    }).isRequired\n  }).isRequired\n};\nexport default Link;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Input from '../Input/Input';\nimport { LoggedUserConsumer } from '../../contexts/LoggedUserContext';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formData: {\n        username: '',\n        password: ''\n      },\n      formErrors: {\n        username: false,\n        password: false\n      },\n      signInFailed: false,\n      keepUserSignedIn: false\n    }\n  }\n\n  handleUsernameChange = event => {\n    const { value: username } = event.target;\n    this.setState({\n      formErrors: {\n        ...this.state.formErrors,\n        username: false\n      },\n      formData: {\n        ...this.state.formData,\n        username\n      }   \n    });\n  }\n\n  handlePasswordChange = event => {\n    const { value: password } = event.target;\n    this.setState({\n      formErrors: {\n        ...this.state.formErrors,\n        password: false\n      },\n      formData: {\n        ...this.state.formData,\n        password: password\n      }   \n    });\n  }\n\n  onInputKeyPress = (key, setUserLogged) => {\n    if (key === 'Enter') {\n      this.onSubmitSignIn(setUserLogged);\n    }\n  }\n\n  fieldsValid = () => {\n    const { username, password } = this.state.formData;\n    const passwordValid = password.trim().length > 0;\n    const usernameValid = username.trim().length > 0;\n\n    this.setState({\n      formErrors: {\n        username: !usernameValid,\n        password: !passwordValid\n      }\n    });\n\n    return passwordValid && usernameValid;\n  }\n\n  loadUser = (userId) => {\n    const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n    fetch(`${process.env.PUBLIC_URL}profile/${userId}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw Error();\n        }\n      })\n      .then(user => this.props.setUserLogged(true, user))\n      .catch(err => {\n        this.setState({ signInFailed: true });\n      });\n  }\n\n  handleKeepSignedInClick = (event) => {\n    this.setState({\n      keepUserSignedIn: event.target.checked\n    })\n  }\n\n  saveAuthTokenInSession = token => {\n    this.state.keepUserSignedIn ?\n    localStorage.setItem('token', token) :\n    sessionStorage.setItem('token', token);\n  }\n\n  onSubmitSignIn = () => {\n    if (!this.fieldsValid()) {\n      return;\n    }\n\n    fetch(`${process.env.PUBLIC_URL}signin`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state.formData)\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      throw Error();\n    })\n    .then(data => {\n      if (data.userId && data.success === 'true') {\n        this.saveAuthTokenInSession(data.token);\n        return this.loadUser(data.userId);\n      }\n      throw Error();\n    })\n    .catch(err => {\n      this.setState({ signInFailed: true });\n    });\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n    if (token) {\n      fetch(`${process.env.PUBLIC_URL}signin`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      })\n        .then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          throw Error();\n        })\n        .then(data => {\n          if (data && data.id) {\n            this.loadUser(data.id);\n          }\n        })\n        .catch(err => {\n          localStorage.removeItem('token');\n          sessionStorage.removeItem('token');\n        })\n    }\n  }\n\n  render() {\n    const { keepUserSignedIn } = this.state;\n    const { username, password } = this.state.formData;\n    const { username: usernameErrorState, password: passwordErrorState } = this.state.formErrors;\n    const { setUserLogged } = this.props;\n    return (\n      <article className='br3 ba dark-gray b--black-10 mv4 w-100 w-50-m mw6 center bg-black-translucent'>\n        <main className='pa4 black-80'>\n        <fieldset id='sign_in' className='white ba b--transparent ph0 mh0'>\n          <legend className='f3 fw6 ph0 mh0'>Sign In</legend>\n          <div className='mt3'>\n            <Input\n              id='signin_username'\n              label='Username'\n              onInputKeyPress={({ key }) => this.onInputKeyPress(key, setUserLogged)}\n              onInputChange={this.handleUsernameChange}\n              inputValue={username}\n              errorState={usernameErrorState}\n              errorMessage='You must enter your username' />\n          </div>\n          <div className='mv3'>\n            <Input\n                id='signin_password'\n                label='Password'\n                onInputKeyPress={({ key }) => this.onInputKeyPress(key, setUserLogged)}\n                onInputChange={this.handlePasswordChange}\n                inputValue={password}\n                errorState={passwordErrorState}\n                errorMessage='You must enter your password'\n                password />\n          </div>\n          <div className='mv3 tl'>\n            <input\n              id='signin_keepSignedIn'\n              type='checkbox'\n              checked={keepUserSignedIn}\n              onChange={this.handleKeepSignedInClick} />\n            <label htmlFor='signin_keepSignedIn' className='ma2 pa0 lh-copy f6 pointer'>Keep me signed in</label>\n          </div>\n        </fieldset>\n        {this.state.signInFailed ? <p className='mb4' style={{color: '#c0392b'}}>Username and password combination invalid</p> : null}\n        <div>\n          <button \n            className='b ph3 pv2 button-reset ba b--white white bg-transparent grow pointer f5 dib hover-bg-light-purple hover-black'\n            onClick={() => this.onSubmitSignIn(setUserLogged)}>\n            Sign In\n          </button>\n        </div>\n        <div className='lh-copy mt3'>\n          <Link to='signup' className='f6 link dim white db'>Need an account? Sign Up!</Link>\n        </div>\n        </main>\n      </article>\n    );\n  }\n};\n\nexport default React.forwardRef((props, ref) => (\n  <LoggedUserConsumer>\n    {({setUserLogged}) => <SignIn {...props} setUserLogged={setUserLogged} /> }\n  </LoggedUserConsumer>\n))"],"sourceRoot":""}