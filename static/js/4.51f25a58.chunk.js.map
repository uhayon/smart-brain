{"version":3,"sources":["components/ImageDetection/ImageLinkForm/ImageLinkForm.module.scss","components/ImageDetection/ImageLinkForm/ModelSelector/ModelSelector.js","components/ImageDetection/ImageLinkForm/ImageLinkForm.js","components/ImageDetection/Rank/Rank.js","components/ImageDetection/ImageContainer/ImageReferences/ImageReferences.js","components/ImageDetection/ImageContainer/ImageContainer.js","components/ImageDetection/ImageDetection.js","components/ImageDetection/ImageContainer/ImageReferences/ImageReferences.module.scss","components/ImageDetection/ImageContainer/ImageContainer.module.scss"],"names":["module","exports","form","formInput","formContainer","ModelSelector","_ref","onFormModelChange","selectedModel","models","react_default","a","createElement","name","id","className","onChange","value","map","model","i","key","text","ImageLinkForm","onFormInputChange","onImageSubmit","inputValue","concat","style","margin","ImageLinkForm_ModelSelector_ModelSelector","type","onClick","description","Rank","LoggedUserContext","_ref$userData","userData","fullname","entries","getBox","document","querySelector","ImageReferences","errorState","isSearching","references","lastSearchedModel","minWidth","Spinner","length","_ref2","backgroundColor","referenceElement","onMouseOver","box","classList","add","boundingBoxHovered","highlightBox","onMouseOut","remove","unhighlightBox","data-reference","color","ImageContainer","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","resizeBoxes","setState","calculateBoundingBoxVertices","boundingBox","image","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","getReferenceListElement","highlightReference","liElement","hovered","unhighlightReference","state","window","addEventListener","removeEventListener","_this2","_this$props","errorText","container","trim","fontSize","fontWeight","display","src","alt","boxStyles","_this2$calculateBound","top","right","bottom","left","onMouseEnter","onMouseLeave","ImageContainer_ImageReferences_ImageReferences","React","Component","Clarifai","CELEBRITY_MODEL","ImageDetection","event","input","target","selectedModelValue","setUserLogged","_this$state","imageUrl","fetch","method","headers","Content-Type","Authorization","localStorage","getItem","sessionStorage","body","JSON","stringify","detectionType","then","response","ok","json","Promise","reject","status","data","user","handleImageRecognition","catch","err","apiResponse","setReferences","getSelectedModel","find","_this$state2","ImageDetection_Rank_Rank","ImageDetection_ImageLinkForm_ImageLinkForm","ImageDetection_ImageContainer_ImageContainer"],"mappings":"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","file":"static/js/4.51f25a58.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ImageLinkForm_form__39jrh\",\"formInput\":\"ImageLinkForm_formInput__2eaPK\",\"formContainer\":\"ImageLinkForm_formContainer__1kd5A\"};","import React from 'react';\n\nconst ModelSelector = ({ onFormModelChange, selectedModel, models }) => {\n  return (\n    <select \n      name=\"modelSelector\" \n      id=\"model_selector\" \n      className='bg-light-purple white'\n      onChange={onFormModelChange}\n      value={selectedModel.value}>\n      {\n        models.map((model, i) => <option key={i} value={model.value}>{model.text}</option>)\n      }\n    </select>\n  )\n}\n\nexport default ModelSelector;","import React from 'react';\n\nimport ModelSelector from './ModelSelector/ModelSelector';\nimport { form, formInput, formContainer } from './ImageLinkForm.module.scss';\n\nconst ImageLinkForm = ({ onFormInputChange, onImageSubmit, inputValue, onFormModelChange, selectedModel, models }) => {\n  return (\n    <div>\n      <p className=\"f3 white\">\n        {'This Magic Brain will detect what you want in your pictures. Give it a try.'}\n      </p>\n      <div className='flex-justify-center center'>\n        <div className={`pa4 br3 shadow-5 flex-justify-center center column ${form}`}>\n          <div className={`${formContainer} center`} style={{margin: '0'}}>\n            <ModelSelector\n              onFormModelChange={onFormModelChange}\n              selectedModel={selectedModel}\n              models={models} />\n            <input \n              className={`${formInput} f4 pa2 w-70 flex-justify-center center input-reset ba b--white-10`} \n              type=\"text\" \n              onChange={onFormInputChange}\n              value={inputValue} />\n            <button \n              className=\"w-30 grow f4 link ph3 pv2 dib white bg-dark-gray b--white-10 bg-light-purple\" \n              onClick={onImageSubmit}>\n              Detect\n            </button>\n          </div>\n          <span className='white mt3 bg-black'>{selectedModel.description}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ImageLinkForm;","import React from 'react';\n\nimport { LoggedUserConsumer } from '../../../contexts/LoggedUserContext';\n\nconst Rank = () => {\n  return (\n    <LoggedUserConsumer>\n      {\n        ({ userData: { fullname, entries } }) => {\n          return (\n            <div>\n              <div className=\"white f3\">\n                {`${fullname}, your entries count is...`}\n              </div>\n              <div className=\"white f1\">\n                {entries}\n              </div>\n            </div>\n          )\n        }\n      }\n    </LoggedUserConsumer>\n  );\n}\n\nexport default Rank;","import React from 'react';\n\nimport { referenceElement } from './ImageReferences.module.scss';\nimport { boundingBoxHovered } from '../ImageContainer.module.scss';\n\nimport Spinner from '../../../SuspenseLoading/Spinner/Spinner';\n\nconst getBox = key => {\n  return document.querySelector(`[data-reference=\"${key}\"]`);\n}\n\nconst highlightBox = key => {\n  const box = getBox(key);\n  if (box) {\n    box.classList.add(boundingBoxHovered);\n  }\n}\n\nconst unhighlightBox = key => {\n  const box = getBox(key);\n  if (box) {\n    box.classList.remove(boundingBoxHovered);\n  }\n}\n\nconst ImageReferences = ({ errorState, isSearching, references, lastSearchedModel, selectedModel: { value: selectedModel } }) => {\n  return (\n    <div style={{minWidth: '25%'}}>\n      <ul className='list pl0'>\n        {\n          isSearching ?\n          <Spinner /> :\n          (\n            errorState || (lastSearchedModel === selectedModel && references.length === 0) ?\n            <p className='pa2 ttc'>There's no elements that match what you are looking for in the provided picture</p> :\n            (\n              lastSearchedModel === selectedModel && references.length > 0 ?\n                (\n                  references.map(({ description, key }) =>\n                  <li \n                    style={\n                      selectedModel === 'COLOR_MODEL' ?\n                      {\n                        backgroundColor: key\n                      } :\n                      {}\n                    }\n                    className={`${referenceElement} pointer pa2 ttc`}\n                    onMouseOver={() => highlightBox(key)}\n                    onMouseOut={() => unhighlightBox(key)}\n                    key={description}\n                    data-reference={key} >\n                    <span\n                      style={\n                        selectedModel === 'COLOR_MODEL' ?\n                        {\n                          backgroundColor: 'rgba(0, 0, 0, .75)',\n                        color: '#fff'\n                        } :\n                        {}\n                      }\n                    >\n                      {description}\n                    </span>\n                  </li>\n                )\n              ) :\n              null\n            )\n          )\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default ImageReferences;","import React from 'react';\n\nimport ImageReferences from './ImageReferences/ImageReferences';\nimport { boundingBox, container } from './ImageContainer.module.scss';\nimport { hovered } from './ImageReferences/ImageReferences.module.scss';\n\nclass ImageContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resizeBoxes: false\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resizeBoxes);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resizeBoxes)\n  }\n\n  resizeBoxes = () => {\n    this.setState({resizeBoxes: true});\n  }\n\n  calculateBoundingBoxVertices = (boundingBox) => {\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n  \n    return {\n      leftCol: boundingBox.left_col * width,\n      topRow: boundingBox.top_row * height,\n      rightCol: width - (boundingBox.right_col * width),\n      bottomRow: height - (boundingBox.bottom_row * height)\n    };\n  }\n\n  getReferenceListElement = key => {\n    return document.querySelector(`li[data-reference=\"${key}\"]`)\n  }\n  \n  highlightReference = key => {\n    const liElement = this.getReferenceListElement(key);\n    if (liElement) {\n      liElement.classList.add(hovered);\n    }\n  }\n\n  unhighlightReference = key => {\n    const liElement = this.getReferenceListElement(key);\n    if (liElement) {\n      liElement.classList.remove(hovered);\n    }\n  }\n\n  render() {\n    const { image, references, selectedModel, isSearching, lastSearchedModel, errorState, errorText } = this.props;\n    return (\n      <div className={`${container} ${image.trim() === '' ? 'dn' : 'flex'} justify-around center ma`}>\n        <div className=\"relative\">\n          {\n            errorState ?\n            <p style={{\n              color: 'red',\n              fontSize: '1.3rem',\n              fontWeight: 'bold',\n              backgroundColor: 'rgba(255, 255, 255, .75)'\n            }}>{errorText}</p> :\n            null\n          }\n          <img \n            id='inputimage'\n            style={{display: `${image === '' || errorState ? 'none' : 'block'}`}} \n            src={image}\n            alt=\"Recognize\"\n            width='100%'\n            height='100%' />\n          {\n            references.map(({box, key}) => {\n              let boxStyles = {};\n              if (box) {\n                  const {topRow, bottomRow, leftCol, rightCol} = this.calculateBoundingBoxVertices(box);\n                  boxStyles = {top: topRow, right: rightCol, bottom: bottomRow, left: leftCol};\n              }\n              return (\n                <div \n                  data-reference={key} \n                  key={key} \n                  className={boundingBox} \n                  style={boxStyles}\n                  onMouseEnter={() => this.highlightReference(key)}\n                  onMouseLeave={() => this.unhighlightReference(key)} >\n                </div>\n              )\n            })\n          }\n        </div>\n        <ImageReferences \n          errorState={errorState}\n          references={references}\n          selectedModel={selectedModel}\n          isSearching={isSearching}\n          lastSearchedModel={lastSearchedModel} />\n      </div>\n    );\n  }\n}\n\n\nexport default ImageContainer;","import React from 'react';\nimport Clarifai from 'clarifai';\n\nimport ImageLinkForm from './ImageLinkForm/ImageLinkForm';\nimport Rank from './Rank/Rank';\nimport ImageContainer from './ImageContainer/ImageContainer';\nimport { LoggedUserConsumer } from '../../contexts/LoggedUserContext';\n\nimport models from '../../mockData/models.json';\n\nClarifai.CELEBRITY_MODEL = 'e466caa0619f444ab97497640cefc4dc';\n\nclass ImageDetection extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      input: '',\n      imageUrl: '',\n      lastSearchedModel: '',\n      selectedModelValue: models[0].value,\n      references: [],\n      isSearching: false,\n      errorState: false,\n      errorText: ''\n    };\n  }\n\n  onFormInputChange = (event) => {\n    this.setState({\n      input: event.target.value,\n      errorState: false\n    })\n  }\n\n  onFormModelChange = (event) => {\n    this.setState({\n      selectedModelValue: event.target.value\n    });\n  }\n\n  onImageSubmit = (id, setUserLogged) => {\n    const { selectedModelValue, input } = this.state;\n    this.setState({\n      imageUrl: input,\n      isSearching: true,\n      lastSearchedModel: selectedModelValue\n    }, () => {\n      fetch(`https://ur-smart-brain-api.herokuapp.com/imageurl`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token') || sessionStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          imageUrl: input,\n          detectionType: selectedModelValue\n        })\n      })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return Promise.reject(response.status)\n      })\n      .then(data => {\n        if (data) {\n          fetch(`https://ur-smart-brain-api.herokuapp.com/image`, {\n            method: 'put',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${localStorage.getItem('token') || sessionStorage.getItem('token')}`\n            },\n            body: JSON.stringify({ id })\n          })\n          .then(response => response.json())\n          .then(user => setUserLogged(true, user));\n        }\n        this.handleImageRecognition(data);\n      })\n      .catch((err) => {\n        this.setState({\n          isSearching: false,\n          errorState: true,\n          errorText: err === 401 ? 'You are unauthorized to execute this operation. Plase log out and enter again with your credentials' : 'There was an error. Please try again in a moment'\n        }) \n      });\n    });\n  }\n\n  handleImageRecognition = apiResponse => {\n    this.setReferences(apiResponse);\n  }\n\n  setReferences = (references) => {\n    this.setState({\n      references,\n      isSearching: false\n    });\n  }\n\n  getSelectedModel = () => {\n    return models.find(model => model.value === this.state.selectedModelValue) || models[0];\n  }\n\n  render() {\n    const { input, imageUrl, references, isSearching, errorState, errorText, lastSearchedModel } = this.state;\n    const selectedModel = this.getSelectedModel();\n\n    return (\n      <LoggedUserConsumer>\n        {\n          ({ userData: { id }, setUserLogged }) => {\n            return (\n              <div className='mt5'>\n                <Rank />\n                <ImageLinkForm \n                  onFormInputChange={this.onFormInputChange}\n                  inputValue={input}\n                  onImageSubmit={() => this.onImageSubmit(id, setUserLogged)}\n                  onFormModelChange={this.onFormModelChange}\n                  selectedModel={selectedModel}\n                  models={models} />\n                  {\n                    <ImageContainer \n                      errorState={errorState}\n                      errorText={errorText}\n                      image={imageUrl}\n                      references={references}\n                      selectedModel={selectedModel} \n                      isSearching={isSearching}\n                      lastSearchedModel={lastSearchedModel} />\n                  }\n              </div>\n            );\n          }\n        }\n      </LoggedUserConsumer>\n    )\n  }\n}\n\nexport default ImageDetection;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"referenceElement\":\"ImageReferences_referenceElement__Boi02\",\"hovered\":\"ImageReferences_hovered__3cwJ0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boundingBox\":\"ImageContainer_boundingBox__3eLqc\",\"boundingBoxHovered\":\"ImageContainer_boundingBoxHovered__2PWcZ\",\"container\":\"ImageContainer_container__3FNX5\"};"],"sourceRoot":""}